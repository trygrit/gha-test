name: "Terraform Pull Request Commenter"
description: "Adds opinionated comments to a PR from Terraform fmt/init/plan output."
author: "Try GRIT"
branding:
  icon: "git-pull-request"
  color: "purple"
inputs:
  command:
    description: "The terraform command to run (fmt, init, plan)"
    required: true
  directory:
    description: "Directory containing terraform files"
    required: true
  workspace:
    description: "Terraform workspace to use"
    required: false
    default: "default"
  github_token:
    description: "GitHub token for API access"
    required: true
  terraform_version:
    description: "Version of Terraform to use"
    required: false
    default: "1.12.1"
runs:
  using: "docker"
  image: "Dockerfile"
  args:
    - ${{ inputs.command }}
    - ${{ inputs.directory }}
  env:
    GITHUB_TOKEN: ${{ inputs.github_token }}
    TERRAFORM_WORKSPACE: ${{ inputs.workspace }}
    TERRAFORM_VERSION: ${{ inputs.terraform_version }}
